(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     79140,       1674]
NotebookOptionsPosition[     75638,       1571]
NotebookOutlinePosition[     76292,       1593]
CellTagsIndexPosition[     76249,       1590]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Valve52", "Section",
 CellChangeTimes->{{3.5353721095590158`*^9, 3.53537211830196*^9}, 
   3.5353722343957663`*^9, {3.8036340525046444`*^9, 3.8036340541474895`*^9}, 
   3.803881178343158*^9, 3.8042501406479216`*^9, 3.804273527535226*^9, {
   3.804329442880397*^9, 3.804329445883741*^9}, 3.8048574830449095`*^9, 
   3.8055437085440426`*^9},
 ExpressionUUID -> "a8f57cf9-7f46-4f7f-baf1-14fe362c0648"],

Cell[BoxData[
 RowBox[{"<<", "C:\\\\Hopsan\\Compgen\\CompgenNG.mx"}]], "Input",
 CellGroupingRules->{"GroupTogetherGrouping", 10000.},
 CellChangeTimes->{{3.525533906765625*^9, 3.525533914734375*^9}, 
   3.577601924150117*^9, 3.753532820170209*^9, 3.753532868377143*^9, 
   3.762728078322752*^9},
 ExpressionUUID -> "844b3beb-a2fd-4fc9-87e6-b4719622a54d"],

Cell["This path is pointing to where the file should be generated", "Text",
 CellChangeTimes->{{3.804746787277581*^9, 
  3.8047468131049385`*^9}},ExpressionUUID->"d841070d-8477-431e-b63d-\
f1e54cda9d7b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"path", "=", 
   RowBox[{"ToFileName", "[", 
    RowBox[{"{", 
     RowBox[{
     "\"\<C:\>\"", ",", "\"\<Users\>\"", ",", "\"\<petkr14\>\"", ",", 
      "\"\<Dropbox\>\"", ",", "\"\<HopsanComponents\>\"", ",", 
      "\"\<PneumaticDevelop\>\"", ",", "\"\<PneumaticComponents\>\""}], "}"}],
     "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.8036224011917915`*^9, 3.80362242280663*^9}, 
   3.804935035606517*^9, 3.805455735116706*^9},
 ExpressionUUID -> "9fffce38-6c31-4ac2-8fe0-709b9320587f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"path", "=", 
   RowBox[{"ToFileName", "[", 
    RowBox[{"{", 
     RowBox[{
     "\"\<H:\>\"", ",", "\"\<PettersDropbox\>\"", ",", "\"\<Dropbox\>\"", 
      ",", "\"\<HopsanComponents\>\"", ",", "\"\<PneumaticDevelop\>\"", ",", 
      "\"\<PneumaticComponents\>\""}], "}"}], "]"}]}], ";"}]], "Input",
 CellGroupingRules->{"GroupTogetherGrouping", 10000.},
 CellChangeTimes->{{3.754985113560959*^9, 3.754985114033472*^9}, {
   3.757063485852047*^9, 3.757063485995899*^9}, 3.76272807832475*^9, {
   3.7747826878685503`*^9, 3.774782689771587*^9}, {3.7747982976294117`*^9, 
   3.774798305629897*^9}, {3.803622448189187*^9, 3.8036224560248623`*^9}, 
   3.804935034426733*^9, 3.8054557323076034`*^9},
 ExpressionUUID -> "b1a17ebe-ca25-48b4-8480-1a36ba699ce9"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"domain", "=", "\"\<Pneumatic\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"displayName", "=", "\"\<Valve52\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"brief", "=", "\"\<Pneumatic 52-valve\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"componentType", "=", "\"\<ComponentQ\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "author", "=", 
   "\"\<Petter Krus*<petter.krus@liu.se>, Victor Juliano De Negri** \
<victor.de.negri@ufsc.br>\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "affiliation", " ", "=", " ", 
   "\"\<*IEI/Flumes, Link\[ODoubleDot]ping University, **Universidade Federal \
de Santa Catarina\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetFilenames", "[", 
   RowBox[{"path", ",", "domain", ",", "displayName"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ResetComponentVariables", "[", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Date", "[", "]"}]}], "Input",
 CellGroupingRules->{"GroupTogetherGrouping", 10001.},
 CellChangeTimes->{{3.513785360140625*^9, 3.513785397734375*^9}, 
   3.5137854683125*^9, 3.5153945210188417`*^9, {3.51608651940625*^9, 
   3.516086528875*^9}, {3.516356859703125*^9, 3.516356873*^9}, {
   3.5353705928437004`*^9, 3.5353705930310946`*^9}, {3.535528004859375*^9, 
   3.535528013828125*^9}, 3.5757768090335207`*^9, {3.6058649145952826`*^9, 
   3.6058649172112823`*^9}, 3.6266921123196993`*^9, {3.8036340643406515`*^9, 
   3.8036340782586813`*^9}, {3.803881171499217*^9, 3.8038811735021505`*^9}, {
   3.8042501387808495`*^9, 3.804250142297221*^9}, {3.80427352965504*^9, 
   3.804273531102547*^9}, {3.8043294531557817`*^9, 3.804329456958108*^9}, {
   3.804857125863344*^9, 3.804857127807338*^9}, 3.805024339858855*^9, {
   3.8055437051305633`*^9, 3.8055437068328075`*^9}, 3.8056272757059183`*^9, {
   3.80562739835402*^9, 3.8056274161356792`*^9}, {3.8056274463754864`*^9, 
   3.8056276213759727`*^9}},
 ExpressionUUID -> "f1d28f9a-2912-4dec-a44b-799e1f1980c6"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "2020", ",", "8", ",", "5", ",", "15", ",", "42", ",", 
   "1.9851632`8.050371202290238"}], "}"}]], "Output",
 CellGroupingRules->{"GroupTogetherGrouping", 10001.},
 CellChangeTimes->{{3.626692080734541*^9, 3.6266921169441614`*^9}, {
   3.626693966767125*^9, 3.6266939824806967`*^9}, 3.6266940419696445`*^9, 
   3.6266947483748465`*^9, 3.626694938685317*^9, {3.626694985830031*^9, 
   3.6266950021316605`*^9}, 3.626695489603403*^9, 3.626695731138554*^9, 
   3.6266959441988583`*^9, 3.6266962597274075`*^9, {3.6266980423116484`*^9, 
   3.626698064610878*^9}, 3.6267530586610126`*^9, 3.626786702730054*^9, {
   3.6267867927080507`*^9, 3.6267868102418036`*^9}, 3.6267869371954975`*^9, 
   3.6267883481153336`*^9, 3.6267885458053336`*^9, {3.6267886029373336`*^9, 
   3.626788627960334*^9}, 3.626788667118334*^9, {3.626788725817361*^9, 
   3.6267887750692854`*^9}, 3.8036344883826056`*^9, 3.803634647451294*^9, 
   3.803813662538252*^9, 3.803813999492004*^9, 3.8042418563328433`*^9, 
   3.804242086681238*^9, 3.804242345806949*^9, 3.8042447623097053`*^9, 
   3.804246387829973*^9, 3.8042493296015215`*^9, 3.8042500501263013`*^9, 
   3.8042502430932493`*^9, 3.8042503486034145`*^9, 3.8042505580044165`*^9, {
   3.804330370563507*^9, 3.804330391618931*^9}, 3.804330940074765*^9, 
   3.8043310240133247`*^9, 3.804331146159178*^9, 3.804405475592243*^9, 
   3.8044100020691433`*^9, 3.804587781635994*^9, 3.8045897138399153`*^9, 
   3.804594281360493*^9, 3.804595154734604*^9, 3.8045953580388947`*^9, 
   3.804595495936651*^9, 3.804595556028666*^9, 3.804595628525885*^9, 
   3.8045956968274317`*^9, 3.804598888339372*^9, 3.804599021907595*^9, 
   3.804757554047377*^9, 3.8047576859669247`*^9, 3.804837773327941*^9, 
   3.804837821017748*^9, 3.804837913059807*^9, 3.8048537384503727`*^9, 
   3.8048571817816644`*^9, 3.804920337402954*^9, 3.804921283329753*^9, 
   3.8049213813736205`*^9, 3.805014808268583*^9, 3.805014993114212*^9, {
   3.8050243177620745`*^9, 3.805024339858855*^9}, 3.8054557744574537`*^9, 
   3.8054558201323395`*^9, 3.805455887787578*^9, 3.8054560745609207`*^9, 
   3.8055246359595404`*^9, 3.805524704195155*^9, 3.805524801214073*^9, 
   3.805524994716473*^9, 3.805525041354367*^9, 3.8055250744282503`*^9, 
   3.8055251120524406`*^9, 3.805525198040743*^9, 3.805525230596163*^9, 
   3.8055253552910566`*^9, 3.8055255011116433`*^9, 3.805525557539437*^9, 
   3.805525594694111*^9, 3.805525662593073*^9, 3.8055257015428963`*^9, 
   3.8055257364538856`*^9, 3.8055259699633417`*^9, 3.805526007265876*^9, 
   3.8055260662500477`*^9, 3.8055261279773755`*^9, 3.8055262983066807`*^9, 
   3.8055263381316013`*^9, 3.8055263751843805`*^9, 3.805526413159209*^9, {
   3.8055264749374847`*^9, 3.8055265294402657`*^9}, 3.8055266262573967`*^9, 
   3.8055266997755632`*^9, 3.8055268136381135`*^9, 3.8055268582800646`*^9, 
   3.805526958152733*^9, 3.8055270912184753`*^9, 3.805527128794716*^9, 
   3.8055271714337325`*^9, 3.8055273885967283`*^9, {3.805527420388934*^9, 
   3.80552744945695*^9}, 3.805527550840397*^9, 3.805527586310809*^9, 
   3.8055276489462004`*^9, 3.8055276991494155`*^9, 3.8055277442758675`*^9, 
   3.805527780357649*^9, 3.8055278468860245`*^9, 3.805527879316572*^9, 
   3.8055294579492188`*^9, 3.80552952430777*^9, 3.8055295656251507`*^9, 
   3.8055296122630434`*^9, 3.805529852446294*^9, 3.805534450436387*^9, 
   3.805534548776949*^9, 3.80553460312389*^9, {3.8055348478194857`*^9, 
   3.8055348649518127`*^9}, 3.8055349506204453`*^9, 3.80553501482322*^9, {
   3.8055352179656773`*^9, 3.8055352250743446`*^9}, 3.805535265889268*^9, 
   3.805541347913973*^9, 3.8055415031168814`*^9, 3.8055417845006313`*^9, 
   3.8055419973660593`*^9, 3.8055420848678017`*^9, 3.8055424927181015`*^9, 
   3.805542541787487*^9, 3.8055425973701525`*^9, 3.8055427444724154`*^9, 
   3.805613614885068*^9, 3.8056157360206394`*^9, 3.805615902161265*^9, 
   3.8056159593682556`*^9, 3.805616151614952*^9, 3.805616376980487*^9, 
   3.80562287690287*^9, 3.805623722045102*^9, 3.8056272757059183`*^9},
 ExpressionUUID -> "0df5666d-74e4-407c-96f5-305eca4ccc1a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"eps", "=."}], ";", 
  RowBox[{"R", "=."}], ";"}]], "Input",
 CellGroupingRules->{"GroupTogetherGrouping", 10001.},
 CellChangeTimes->{{3.575777009031903*^9, 3.5757770093129168`*^9}, {
   3.8042423261122637`*^9, 3.804242327784542*^9}, 3.805024339858855*^9, 
   3.805627275706918*^9},
 ExpressionUUID -> "b013c274-698f-428f-b38d-a2e617c365f0"]
}, Closed]],

Cell[CellGroupData[{

Cell["Component description", "Subsection",ExpressionUUID->"33d33fda-af94-4e63-8d63-777ee2b1fbf3"],

Cell["\<\
This is a simple pneumatic valve with three ports and three positions. The \
opening is proportional to the input signal and limited between 0 and 1. At 1 \
input signal it opens between pressure port (1) and load port (4) and between \
the load port (2) and return (3). When the input signal it is one.   At zero \
input signal it opens the load port (2) to the pressure port (1)  and between \
the load port (4) and return port (5).  The opening is proportional to the \
input signal. There is no valve dynamics\
\>", "Text",
 CellChangeTimes->{{3.8050222996074395`*^9, 3.8050223969109397`*^9}, {
   3.8050224580941873`*^9, 3.8050225050586367`*^9}, {3.805022547197379*^9, 
   3.8050225770905113`*^9}, {3.8050229423647647`*^9, 3.805022947994833*^9}, {
   3.8050229965362473`*^9, 3.80502311593644*^9}, {3.8050231470569267`*^9, 
   3.8050231830501547`*^9}, {3.805023334479188*^9, 3.8050234261703887`*^9}, 
   3.805023671522853*^9, {3.8050237813496456`*^9, 3.805023820894039*^9}, {
   3.8056268915461845`*^9, 3.805627072164873*^9}, {3.805627214728817*^9, 
   3.8056272299061623`*^9}},
 ExpressionUUID -> "8691b14c-c93d-4322-aee2-62f88b1104a4"],

Cell[GraphicsData["Metafile", "\<\
CF5dJ6E]HGAYHf4PEfU^I6mgLb15CDHPAVmbKF5d0@0002ND0@0006`0000000008@0002H3001H0P00
oOoooogooolH3P006P/00215CDH00040U2L008@0000200000000000000000000HA<006PK003B0000
:@40000000000000000004/d0`0NR0@0AP0002`0000P0000ADe6:`500@0L00004000008@`=/00000
F08005P200160000m0000>P00015CDH[<4020100000400000020?b90100<0000000002Y0000T0000
60000000P3l0000000000000P3l0000000000390004L00004000000000000000041EA000:4@Z@000
900001P00000080o000000000000080o00000000000U@000400000@0000000007d0300`000000000
7T0900`0000000008D0700`000000000:T0002@0000H0000/08/>P0000000000/08/>P00000003=3
140000`0000000008@0000P0000L0000200004/000100000<00000D0000P00000@000040000@0000
00000000001E0`00X080000000000000E@<00:02000T000090000;02;3X0000000000;02;3X00000
000c@`80000R000030000?oooom60000G0h0050>0015CDH[:d0000`0000000007T0600`000000000
8D0500`0000000007T0900`000000000:T0002@0000H0000/08/>P0000000000/08/>P00000003=3
8D0700`00000000024000c`0000`00000Q30f`@00000000000000000001P8II90000060QUTV0;<Q8
0000080/b4P00@61<d000@`000000000940400`000000000:T0002@0000H0000iZ[6@00000000000
7j[3@6c<S41BECM324011A0=00043@000Q30f`8000040000m0`00040001/0000oOoooogooon30000
;P000?goooomoooo7`800;<0000PADe600010?@<000900000@000000000000000000064C001X6`00
dP0002T10000000000000000001;=0<07XP404H0000/0000800004E=AR/1@0007000010000024<3K
000005P2001H0P00AP000:P;002L2`00ADe6:c100P0@000010000000P3lR@0@030000000000Z@000
900001P00000080o000000000000080o00000000000b@0017000010000000000000000000D<002a2
:T0002@0000H00000020?`00000000000020?`00000000009D00010000040000000001m00`0<0000
000001i02@0<0000000002501`0<0000000002Y0000T000060000<SSLD00000000000<SSLD1hO>?3
KZGm``Q000>X0000W000008@`=/@0000000002Xk6T>8P0I3ECdJ@hR01T<G?aY3@XL6@aLo6T>>S`I3
5clJ@lER4D<G?aY34F/A@eDm6T?;LA53:S/J@l]a4D>2o0=3bg4A@eOj0d?;LA53UOP3@a5[4D>En0=3
aF8A@iGh0d>>S`I3UOP3@d:71T=GnP=3R806@h;l0d>8P0I300<30`430`<10`<30@<3PaA0080@0000
10000?ooool8@042>00002`000024<3K000009P000000000OGL7?`<0000008100000008@`=/00000
0000oaE0000@0000100000400008@082>00002`000024<3K000009P000000000OGL7?`<000000810
0000008@`=/000000000o`Q00`</00008000008@`=/20000000005=73d?mN@I3E4L?@mjW4D<00@<3
5D030100000400000P0000Q010>X0000W000008@`=/@000000000:Kd0d>Pm@]3dOH3@j3e2d>Cn0=3
F_`;@i?h0d>V10a3ToP3@lIR4D>Cn0=34V/A@m7f0d?<LA53Y_@3@laa4D?[D?52c74A@iA<lD;<LA53
44Wa@Q9[4D<@BO52aV8A@a19lD:V10a344Wa@U[l2d>DC?52X?D;@n]@lD:Pm@]300<30`430`<10`<3
0@<3PaA0180@000010000?ooool8@0D2>00002`000024<3K000009P000000000G7L7?`<000000810
0000008@`=/000000000oaE0100@0000100000D00008@0H2>00002`000024<3K000009P000000000
OGL7?`<0000008100000008@`=/000000000o`Q01`</00008000008@`=/20000000001O_o4;>40a3
>@Ki@/=L4D<00@<35D070100000400001P0000Q0208h0000;000008@`=/00000V00000000000000o
0`000000P40000000Q30f`000000003o24090b`0000P00000Q30f`8000000000UX@G@bSW1d>aNAA3
Bd/A@`010H4E@0T0400000@000080000240:0c@0000X00000Q30f`<000000000Ga4H@a^L1T>j_QM3
lXX9@nlk5T=E80U30061PAA02X0@0000100000000?l8@0/2>00002`000024<3K000009P000000000
981K?P<0000008100000008@`=/000000000oaE02P0@0000100000/0000Z@000900001P0001BC7Q0
000000000025gVo0I7YB`bF^_T<8@0`2>00002`000024<3K000009P000000000L2<9?`<000000810
0000008@`=/000000000o`Q03@</00008000008@`=/2000000000:dDWT9PkKM2/1BN@]WobT800H61
5D0=010000040000300000Q03P<d0000:000008@`=/3000000000:dDWT8?c;E2P5jL@XQN^d8o/Im2
R5jk@P01PH4D@0j0400000@00000003o240?0SP0000/00000Q30f`00002H00000000084SRCh30000
0020@00000024<3K000000000?lE@0h0400000@0000?0000:T0002@0000H0000b>=a@00000000000
b>=a@7Qlhl=^YOg3240@0SP0000/00000Q30f`00002H0000000007eg1cl300000020@00000024<3K
000000000?l8@143;000020000024<3K0P000000001f:AI3F`d>@dMD6D<V3`i30061PAE04@0@0000
100001000008@182>00002`000024<3K000009P000000000OGL7?`<0000008100000008@`=/00000
0000o`Q04`</00008000008@`=/20000000008c?5d<U5Pi3SLlG@b=b4D<00@615D0C010000040000
4P0002Y0000T0000600003N=E<0dZ`0omDkG_^H:O/0QX;M375be@bY0000T0000600003N=E<0dZ`0o
fe3`?[ADPl0V[hY3@BVl@`Q0508h0000;000008@`=/00000V0000000001mM`Lo0`000000P4000000
0Q30f`000000003o240E0b`0000P00000Q30f`80000000006QRQ@QLbb49Y_IM2Wane@P010H4E@1D0
400000@0000D0000240F0c@0000X00000Q30f`<000000000T2>R@VUCbT:o/Ie2l<34@Q3hX481JLA2
0061PAA05X0@0000100000000?l8@1L2>00002`000024<3K000009P000000000K7N7?P<000000810
0000008@`=/000000000oaE05P0@0000100001L0000Z@000900001P0000gSEC0=:/0?oE>ekkV2Wk0
8J2g@aaL]D<Z@000900001P00038hg50000000000038hg50N7cS`fjUoL<Z@000900001P00038hg50
00000000003VM730:/iM`mD6_d<8@1P2>00002`000024<3K000009P000000000L2<9?`<000000810
0000008@`=/000000000o`Q06@</00008000008@`=/2000000000:dDWT9PkKM2/1BN@]WobT800H40
5D0I010000040000600000Q06P<d0000:000008@`=/3000000000:dDWT8?c;E2P5jL@XQN^d8o/Im2
R5jk@P01PH4D@1Z0400000@00000003o240K0SP0000/00000Q30f`00002H00000000084SRCh30000
0020@00000024<3K000000000?lE@1X0400000@0000K0000:T0002@0000H0000b>=a@00000000000
b>=a@7Qlhl=^YOg3:T0002@0000H0000b>=a@00000000000b>=a@1i6Ql<HY_o3240L0SP0000/0000
0Q30f`00002H0000000007eg1cl300000020@00000024<3K000000000?l8@1d3;000020000024<3K
0P000000000cIjU2D3D?@mBl[d8K=`m30061PAE07@0@0000100001`00008@1h2>00002`000024<3K
000009P000000000OGL7?`<0000008100000008@`=/000000000o`Q07`</00008000008@`=/20000
000005jc[48J?Pm3HK>/@QRJ4T<00@615D0O0100000400007P0002Y0000T000060000<SSLD000000
00000<SSLD1hO>?3KZGm`bY0000T000060000000P3l0000000000000P3l00000000002Y0000T0000
60000000P3l0000000000000P3l00000000002Y0000T000060000000P3l0000000000000P3l00000
000002I0000@0000100000000008@204600000`000024<3K000000<0010d@20030000000000Q0000
20000680000<00000@0004`0001T0000oOoooogooon30000;P000?goooomooooQ`000380000Y0:X0
000000000000080o000000000000080o0000000000000000000000000000000000000000000R0000
30000?oooom60000700001000015CDH[0T0000`0000000003P0001@000000000400001@00008@088
900001P000024<3K0@0000<00000000000000000000K@040@00003@0000200000P0004]^=Kn0K3Fo
JO`1@h?i;d830000Bfhe_h1/=KojAP53P6`e_d]^=KoA8be28@0000P0001R000030000040000Q0000
200001h0000H000000000;<0000W0`00`04001`0000800008@0000P0000Q0000200007<0000<0000
000001`0000800009@0000`0000000209@0000`0000700209@0000`0000>00206@0000`0003oool0
600000`0000000004P0000`0000200004`0000`000010000500000`0000=00005@0000`000010000
5P0000`0000000003@00010000000000000003X0000<00002P0001/0000@000000000000000S0000
80000:gead00000000000:5had3K]Xe0iVXg@b@0000T0000[OG7@00000000000XGS7@=^fSD3VJSM3
100007<0000<0000000000d0000@000000000;<0001B0000L0400040000@00001`00000000000000
_080000000070P8RD`1i07<0M01U06d0000000000000000000000000000000000000000000000000
000000000000000000000000003i0`00Z=U?0<GT[7NXfDl00nJ/MkX8002IjZag>BemS>0Ne1P00?X9
000007T407go_mm30000000000000000000000000000000000000000nPU110000000000000000000
N@@000000000000000000>0Ne1P000000000000000000000>;Oj2@40000000000000000000000000
2<[j2@00003@;=DH0000000000000041j43D600000000000^PP000000@400000000004CQC`10X;1g
TJj;nokoool4fTl0ZffaM`00003BKK5gj1kD6000nPUTMP08000002D0000<00000@0004H0000X0000
700004M4BD<20000oooooooooon00000:P00000000160000500000P00017A4U30`000280000<0000
ooooob80000<0000ooooobD0000<00003@00P2P0000<00000@000280000<0000ooooob80000<0000
ooooodH0003l0@00l04004E=AR//@000900001P00000080o000000000000080o0000P000080Z@000
900001P0003VZ/I000000000000OZ/=0K<b<@59E=d<Z@000900001P0002`0R`j00000000002`0R`j
00000000<d<T@00030000000000[@00030000000000N@0H030000000000Q@0D0300000000008@0<4
:00001`000024<3K00000000010000200000P010ED@002Q4=40300`0000000007T0900`000000000
:T0002@0000H0000/08/>P0000000000/08/>P00000003=38D0700`000000000:T0002@0000H0000
/08/>P0000000000/08/>P00000003=3:T0002@0000H00000020?`00000000000020?`0000000000
:T0002@0000H00000020?`00000000000020?`00000000009T00010000040000000002E0000@0000
10000000000O@0<030000000000N@0T030000000000Q@0L030000000000Z@000900001P00000080o
000000000000080oO0P_A4UT44<4@00030000000000Q0000200001`000080000B`000400000`0000
1@000200000100000@00010000000000000005D3002P0P0000000000001E0`00X08002@0000T0000
0020?`00000000000020?g`8;dA9I1130P0000`0000@000000000000000:00004000000000000000
DP00070100010000Roooo`0000000000000009010000000010048T<0H@1/06T0HP1b06T000000000
000000000030ib]10000000000000000000000000000000000000<3W:d400040000004d000000000
:>5?014000040000V>M?05SRC`10X;1gDJf;nokoooo0hDl0ck2/Me`2001X0P00f0?j2@00082LECAg
GcDdMF508OYLhDl00H0006le=7D000000000000000000000Z1GgSXcQC`3X2cAeHD0QnP008@1Q@27j
HD0001cRC`2fOS9eG6000>SQC`3PDoX9c>=?00T00002000000000=9]/GMLH1P0G604600010000?oo
G60Hoooooool2P0011P406@000000000:87j2E0:[`1<hTl0k3LWM^1CnPULH0@H2@00000000040000
I7H02000000U000030000040000F0000300001P0000B000030000040000H000030000000009D0000
E0000;`2000Q0000mP800:h000020000000000000000000000000040001<00000000000000000000
oooooooooom@0000<P0003/0000U0000300000h0080X000030000040000R000030000?oooom60000
c0000<000015CDH[:T0002@0000H00000020?`00000000000020?`0000000000:T0002@0000H0000
0020?`00000000000020?`00000000009T00010000040000000002E0000@000010000000000O@0<0
30000000000N@0T030000000000Q@0L030000000000Z@000900001P00000080o000000000000080o
>9`AA4UT44<4@00030000000000Q0000200001`000080000B`000400000`00001@00020000010000
0@00010000000000000005D3002P0P0000000000001E0`00X08002@0000T00000020?`0000000000
0020?cRL4DA9I1130P0000`0000@000000000000000:00004000000000000000DP00070100010000
Roooo`0000000000000009010000000010048T<0H@1/06T0HP1b06T000000000000000000030ib]1
0000000000000000000000000000000000000<3W:d400040000004d000000000E0000140001Q@27j
000005SRC`10X;1gDJf;nokoooo0hDl0ck2/Me`2001X0P00f0?j2@00002LECAgGcDdMF508OYLhDl0
0H0006le=7D000000000000000000000Z1GgSXcQC`3X2cAeHD0QnP008@1Q@27jHD0001cRC`2fOS9e
h7X00>SQC`3PDoX9c>=?00T00002000000000=9]/GOPNX<0h7X4P`0010000?ooh7Z3oooooool2P00
18<406@000000000:87j2@P:[`1<hTl0k3LWM^1CnPWPNPB32@00000000040000I7H02000000U0000
30000040000F0000300001P0000B000030000040000H000030000000009D0000E00004H2000Q0000
P0800:h000020000000000000000000000000040001<00000000000000000000oooooooooom@0000
=00003/0000U0000300000h0080X000030000040000R000030000?oooom60000c0000<000015CDH[
:T0002@0000H00000020?`00000000000020?`0000000000:T0002@0000H00000020?`0000000000
0020?`00000000009T00010000040000000002E0000@000010000000000O@0<030000000000N@0T0
30000000000Q@0L030000000000Z@000900001P00000080o000000000000080odWPPA3NF3T@4@000
30000000000Q0000200001`000080000B`000400000`00001@000200000100000@00010000000000
000005D3002P0P0000000000001E0`00X08002@0000T00000020?`00000000000020?m9h84@gUPi4
0P0000`0000@000000000000000:00004000000000000000DP00070100010000Roooo`0000000000
000009010000000010048T<0H@1/06T0HP1b06T000000000000000000030ib]10000000000000000
000000000000000000000<3W:d400040000004d000000000E0000140001Q@27j000005SRC`10X;1g
DJf;nokoooo0hDl0ck2/Me`2001X0P00f0?j2@00042LECAgGcDdMF508OYLhDl00H0006le=7D00000
0000000000000000Z1GgSXcQC`3X2cAeHD0QnP008@1Q@27jHD0001cRC`2fOS9eUGX00>SQC`3PDoX9
c>=?00T00002000000000=9]/GNENZP0UGX4Z00010000?ooUGZXoooooool2P001:P406@000000000
:87j2L09[`1<hTl0k3LWM^1CnPVENPBX2@00000000040000I7H02000000U000030000040000F0000
300001P0000B000030000040000H000030000000009D0000E0000882003;0@00_08005P200020000
000000000000000000000040001<00000000000000000000oooooooooom@0000<@0003/0000U0000
300000h0080X000030000040000R000030000?oooom60000c0000<000015CDH[:T0002@0000H0000
0020?`00000000000020?`0000000000:T0002@0000H00000020?`00000000000020?`0000000000
9T00010000040000000002E0000@000010000000000O@0<030000000000N@0T030000000000Q@0L0
30000000000Z@000900001P00000080o000000000000080of?/dA3NF3T@4@00030000000000Q0000
200001`000080000B`000400000`00001@000200000100000@00010000000000000005D3002P0P00
00000000001E0`00X08002@0000T00000020?`00000000000020?mSk=4@gUPi40P0000`0000@0000
00000000000:00004000000000000000DP00070100010000Roooo`00000000000000090100000000
10048T<0H@1/06T0HP1b06T000000000000000000030ib]100000000000000000000000000000000
00000<3W:d400040000004d000000000E0000140001Q@27j000005SRC`10X;1gDJf;nokoooo0hDl0
ck2/Me`2001X0P00f0?j2@00002LECAgGcDdMF508OYLhDl00H0006le=7D000000000000000000000
Z1GgSXcQC`3X2cAeHD0QnP008@1Q@27jHD0001cRC`2fOS9eG6000>SQC`3PDoX9c>=?00T000020000
00000=9]/GMLH1`0G604700010000?ooG60Loooooool2P0011`406@000000000:87j2E0:[`1<hTl0
k3LWM^1CnPULH0@L2@00000000040000I7H02000000U000030000040000F0000300001P0000B0000
30000040000H000030000000009D0000E0000=@2003;0@003P<005P2000200000000000000000000
00000040001<00000000000000000000oooooooooom@0000<`0003/0000U0000300000h0080X0000
30000040000R000030000?oooom60000c0000<000015CDH[:T0002@0000H00000020?`0000000000
0020?`0000000000:T0002@0000H00000020?`00000000000020?`00000000009T00010000040000
000002E0000@000010000000000O@0<030000000000N@0T030000000000Q@0L030000000000Z@000
900001P00000080o000000000000080o9Gd:A3NF3T@4@00030000000000Q0000200001`000080000
B`000400000`00001@000200000100000@00010000000000000005D3002P0P0000000000001E0`00
X08002@0000T00000020?`00000000000020?bEm2T@gUPi40P0000`0000@000000000000000:0000
4000000000000000DP00070100010000Roooo`0000000000000009010000000010048T<0H@1/06T0
HP1b06T000000000000000000030ib]10000000000000000000000000000000000000<3W:d400040
000004d000000000E0000140001Q@27j000005SRC`10X;1gDJf;nokoooo0hDl0ck2/Me`2001X0P00
f0?j2@000:2LECAgGcDdMF508OYLhDl00H0006le=7D000000000000000000000Z1GgSXcQC`3X2cAe
HD0QnP008@1Q@27jHD0001cRC`2fOS9eh7X00>SQC`3PDoX9c>=?00T00002000000000=9]/GOPNXL0
h7X4Q`0010000?ooh7Z7oooooool2P0018L406@000000000:87j2@P:[`1<hTl0k3LWM^1CnPWPNPB7
2@00000000040000I7H02000000U000030000040000F0000300001P0000B000030000040000H0000
30000000009D0000E00002X2003;0@00I08005P200020000000000000000000000000040001<0000
0000000000000000oooooooooom@0000=@0003/0000U0000300000h0080X000030000040000R0000
30000?oooom60000S00008000015CDH[:T0002@0000H00000020?`00000000000020?`0000000000
:T0002@0000H00000020?`00000000000020?`00000000009T00010000040000000000Q010@H0000
3000008@`=/000000`0043A0100<00000000024000080000HP0000`000010000C00006@000000000
/`0002H3002o0@0000000;<0000W0`003@4002T0ZP00000000000000P3l0000000000000P3l00000
0000000000000000000000000000000000000280000<0000ooooodH0000L0000400004E=AR/2@000
30000000000>000050000000000@00005000
\>"], "Graphics",
 ImageSize->{170., 134.01459854014598`},
 ImageMargins->{{66, 0}, {0, 0}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"inputParameters", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "Bf", ",", ".528", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<B, ISO critical pressure ratio\>\""}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"Cf", ",", 
       RowBox[{"1.", " ", 
        SuperscriptBox["10", 
         RowBox[{"-", "13"}]]}], ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<C, ISO flow coefficient\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "x0", ",", "0.1", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<Relative overlap\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "p0", ",", "100000.", ",", "double", ",", "\"\<Pa\>\"", ",", 
       "\"\<Nominal pressure\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "T0", ",", "297.", ",", "double", ",", "\"\<K\>\"", ",", 
       "\"\<Nominal temperature\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "R", ",", "287.", ",", "double", ",", "\"\<J/Kg K\>\"", ",", 
       "\"\<Gas constant\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "cv", ",", "718", ",", "double", ",", "\"\<J/Kg K\>\"", ",", 
       "\"\<heatcoeff\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "eps", ",", "0.02", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<Linearisation coeff\>\""}], "}"}]}], "\[IndentingNewLine]", 
    "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.535370565329912*^9, 3.5353705653455253`*^9}, {
   3.535370598980867*^9, 3.535370607569777*^9}, {3.535370682449456*^9, 
   3.535370772725971*^9}, 3.5355279035625*^9, {3.572017994427971*^9, 
   3.5720180086697855`*^9}, {3.8036340991916904`*^9, 
   3.8036341013614497`*^9}, {3.8036341945389094`*^9, 3.80363421103648*^9}, {
   3.8042502668327627`*^9, 3.8042502836913753`*^9}, {3.8042735744738126`*^9, 
   3.804273604974348*^9}, {3.804834121737302*^9, 3.8048341252876387`*^9}, 
   3.804857170406397*^9, {3.8049203089303265`*^9, 3.804920310913278*^9}, {
   3.805011464771186*^9, 3.8050114718561707`*^9}, {3.8051085386521115`*^9, 
   3.8051086382954836`*^9}, {3.8051087117254987`*^9, 
   3.8051087197565823`*^9}, {3.805454098728649*^9, 3.8054541048583255`*^9}, 
   3.8054551085310326`*^9},
 ExpressionUUID -> "303be765-e9fc-44f7-94b5-8b137bbc4f2a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"inputVariables", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"{", 
     RowBox[{
     "xin", ",", "1", ",", "double", ",", "\"\<\>\"", ",", 
      "\"\<Input signal 0<xin<1\>\""}], "}"}], "\[IndentingNewLine]", "}"}]}],
   ";"}]], "Input",
 CellChangeTimes->{{3.535527741234375*^9, 3.535527744390625*^9}, {
   3.535527776078125*^9, 3.5355278698125*^9}, {3.5720180179783173`*^9, 
   3.5720180202844496`*^9}, {3.803634115508345*^9, 3.803634155729506*^9}, {
   3.8042501499303474`*^9, 3.80425015057868*^9}, 3.8048571376631727`*^9},
 ExpressionUUID -> "b285c72f-9e43-46ac-b84f-0805e85dec8d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"outputVariables", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "qm12Pos", ",", "0.", ",", "double", ",", "\"\<kg/s\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "qm12Neg", ",", "0.", ",", "double", ",", "\"\<kg/s\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "qm32Pos", ",", "0.", ",", "double", ",", "\"\<kg/s\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "qm32Neg", ",", "0.", ",", "double", ",", "\"\<kg/s\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "qm14Pos", ",", "0.", ",", "double", ",", "\"\<kg/s\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "qm14Neg", ",", "0.", ",", "double", ",", "\"\<kg/s\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "qm54Pos", ",", "0.", ",", "double", ",", "\"\<kg/s\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "qm54Neg", ",", "0.", ",", "double", ",", "\"\<kg/s\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "Ng32e", ",", "0.", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "Ng12e", ",", "0.", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "Ng54e", ",", "0.", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "Ng14e", ",", "0.", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "Bfe", ",", "0.", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<Internal variable\>\""}], "}"}]}], "\[IndentingNewLine]", "}"}]}],
   ";"}]], "Input",
 CellChangeTimes->{{3.626786893484127*^9, 3.626786931443923*^9}, 
   3.803813598174629*^9, 3.8038136341521225`*^9, {3.803813938162367*^9, 
   3.8038139603247657`*^9}, {3.8038145991463203`*^9, 
   3.8038146177733107`*^9}, {3.8038148807248917`*^9, 
   3.8038149028135614`*^9}, {3.803814953045969*^9, 3.803814967057192*^9}, {
   3.8043309934151564`*^9, 3.8043310114208217`*^9}, 3.8045954501858444`*^9, {
   3.805013263536998*^9, 3.805013278739939*^9}, {3.80501424204737*^9, 
   3.8050142445247602`*^9}, {3.8050144625554366`*^9, 
   3.8050144671851745`*^9}, {3.8050146989824276`*^9, 
   3.8050147006181927`*^9}, {3.805014915367519*^9, 3.8050149182222652`*^9}, {
   3.805024083013446*^9, 3.8050240914539475`*^9}, {3.805525319323639*^9, 
   3.8055253268748503`*^9}, {3.8055435243970222`*^9, 3.8055435260702963`*^9}},
 ExpressionUUID -> "1547f96f-2227-4719-9bd2-75f498556134"],

Cell[BoxData[
 RowBox[{
  RowBox[{"nodeConnections", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"PneumaticQnode", "[", 
      RowBox[{"1", ",", "100000.", ",", "\"\<fluid port 1 (P)\>\""}], "]"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"PneumaticQnode", "[", 
      RowBox[{"2", ",", "100000.", ",", "\"\<fluid port 2 (A)\>\""}], "]"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"PneumaticQnode", "[", 
      RowBox[{"3", ",", "100000.", ",", "\"\<fluid port 3 (R)\>\""}], "]"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"PneumaticQnode", "[", 
      RowBox[{"4", ",", "100000.", ",", "\"\<fluid port 4 (B)\>\""}], "]"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"PneumaticQnode", "[", 
      RowBox[{"5", ",", "100000.", ",", "\"\<fluid port 5 (S)\>\""}], "]"}]}],
     "\[IndentingNewLine]", "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.535370789690829*^9, 3.5353707897064214`*^9}, 
   3.53552777309375*^9, {3.535542211390625*^9, 3.535542214078125*^9}, {
   3.535542265921875*^9, 3.535542311625*^9}, {3.5684508318796263`*^9, 
   3.5684508487293115`*^9}, {3.5684511750240593`*^9, 
   3.5684511760840592`*^9}, {3.5720179665203743`*^9, 3.572017974399825*^9}, 
   3.803814669346805*^9, 3.8038148065042076`*^9, {3.8038149093424788`*^9, 
   3.803814935981494*^9}, {3.803880950923745*^9, 3.8038809779838295`*^9}, {
   3.8042735457124767`*^9, 3.8042735489141736`*^9}, 3.804773429558346*^9, 
   3.804773504700839*^9, 3.8047735774467983`*^9, 3.804773625572158*^9, {
   3.8050132869302034`*^9, 3.8050132883292885`*^9}, {3.8050142476192694`*^9, 
   3.8050142486914325`*^9}, {3.805014469107465*^9, 3.8050145415480537`*^9}, {
   3.8050147100626383`*^9, 3.8050147209115753`*^9}, {3.805542851655855*^9, 
   3.805542865871192*^9}},
 ExpressionUUID -> "6f4571d4-b6a4-450e-bd7d-4695ea7860b0"]
}, Open  ]],

Cell[CellGroupData[{

Cell["The system of equations", "Subsection",
 Evaluatable->False,
 PageBreakAbove->False,
 ExpressionUUID -> "c5571497-8955-4b3c-beda-9786edc2a9aa"],

Cell["The spool position is recalculated.", "Text",
 CellChangeTimes->{{3.8036342377161274`*^9, 3.803634252753645*^9}, {
  3.8048570859515133`*^9, 
  3.804857115838684*^9}},ExpressionUUID->"6e2cb804-6aa4-45d1-a7a6-\
46ac2e220b0e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xine", "=", 
   RowBox[{"1", "-", 
    RowBox[{"2", " ", "xin"}]}]}], ";"}]], "Input",
 CellChangeTimes->{{3.805613479048188*^9, 3.8056134837763076`*^9}, {
  3.8056135202157197`*^9, 3.805613523917901*^9}}],

Cell["\<\
The valve areas are limited between 0 and A1max and A3max respectively .\
\>", "Text",
 CellChangeTimes->{{3.8036342377161274`*^9, 3.803634252753645*^9}, {
   3.804925406473482*^9, 3.80492543148868*^9}, {3.8049255329120903`*^9, 
   3.8049255789765744`*^9}, 3.8050132961310015`*^9, 3.8050144886985893`*^9},
 ExpressionUUID -> "6e2cb804-6aa4-45d1-a7a6-46ac2e220b0e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Cf12", "=", 
   RowBox[{"Cf", " ", 
    RowBox[{"limit", "[", 
     RowBox[{
      RowBox[{"(", 
       FractionBox[
        RowBox[{"xine", "-", "x0"}], 
        RowBox[{"1", "-", "x0"}]], ")"}], ",", "0", ",", "1"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Cf32", "=", 
   RowBox[{"Cf", " ", 
    RowBox[{"limit", "[", 
     RowBox[{
      RowBox[{"(", 
       FractionBox[
        RowBox[{
         RowBox[{"-", "xine"}], "-", "x0"}], 
        RowBox[{"1", "-", "x0"}]], ")"}], ",", "0", ",", "1"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Cf14", "=", 
   RowBox[{"Cf", " ", 
    RowBox[{"limit", "[", 
     RowBox[{
      RowBox[{"(", 
       FractionBox[
        RowBox[{
         RowBox[{"-", "xine"}], "-", "x0"}], 
        RowBox[{"1", "-", "x0"}]], ")"}], ",", "0", ",", "1"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Cf54", "=", 
   RowBox[{"Cf", " ", 
    RowBox[{"limit", "[", 
     RowBox[{
      RowBox[{"(", 
       FractionBox[
        RowBox[{"xine", "-", "x0"}], 
        RowBox[{"1", "-", "x0"}]], ")"}], ",", "0", ",", "1"}], "]"}]}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.8036342254795046`*^9, 3.8036342331107635`*^9}, {
   3.8038812411753454`*^9, 3.803881264624159*^9}, {3.8042501867423787`*^9, 
   3.804250225152755*^9}, {3.804250289307581*^9, 3.8042502933444166`*^9}, {
   3.804330837491709*^9, 3.8043309198355713`*^9}, {3.8048376890103693`*^9, 
   3.804837749066965*^9}, {3.80485373294905*^9, 3.8048537346423006`*^9}, {
   3.8048570727521276`*^9, 3.804857077327409*^9}, 3.8049214860616345`*^9, {
   3.805013299116004*^9, 3.805013302204735*^9}, {3.805014256632596*^9, 
   3.8050142592720647`*^9}, {3.8050145583552456`*^9, 
   3.8050145629481525`*^9}, {3.8050147271839695`*^9, 3.805014727816914*^9}, {
   3.805455158947027*^9, 3.805455179490837*^9}, 3.8055435268235207`*^9},
 ExpressionUUID -> "d4555a41-73a0-460c-8a4c-dd2268e49288"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Bf12", "=", "Bf"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Bf32", "=", "Bf"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Bf14", "=", "Bf"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Bf54", "=", "Bf"}], ";"}]}], "Input",
 CellChangeTimes->{{3.805453413762368*^9, 3.805453441487768*^9}, {
   3.8054541143385487`*^9, 3.805454116960842*^9}, {3.8054558786510024`*^9, 
   3.8054558847227397`*^9}, {3.8055252807674103`*^9, 3.805525300690859*^9}, {
   3.8055254774190845`*^9, 3.8055254827855463`*^9}, {3.805525962864666*^9, 
   3.8055259662381835`*^9}, {3.80552725880361*^9, 3.8055272641151314`*^9}, {
   3.8055275203538437`*^9, 3.8055275229851294`*^9}, 3.805543527498823*^9}],

Cell["Calculation of the Ng functions for flow calculations.", "Text",
 CellChangeTimes->{{3.803634260546183*^9, 3.8036342655113525`*^9}, {
  3.8047461774905787`*^9, 
  3.804746198521885*^9}},ExpressionUUID->"fbc6ac93-5130-4905-8ff0-\
27a02bcad99f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Ng1", "=", "1"}], ";"}]], "Input",
 CellChangeTimes->{3.51635891059375*^9, 3.626691991670635*^9},
 ExpressionUUID -> "aa92a39f-08b0-45e1-95b7-8c46f8b9b9cd"],

Cell[BoxData[
 RowBox[{"Ng12Pos", ":=", " ", 
  RowBox[{"(", 
   RowBox[{"signedSquareL", "[", 
    RowBox[{
     RowBox[{"1", "-", 
      FractionBox[
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          FractionBox["p2", "p1"], "-", "Bf12"}], ")"}], "2"], 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{"1", "-", "Bf12"}], ")"}], "2"]]}], ",", "eps"}], "]"}], 
   ")"}]}]], "Input",
 CellChangeTimes->{{3.516362438390625*^9, 3.51636243934375*^9}, {
   3.51636253609375*^9, 3.5163625365625*^9}, 3.568457441890836*^9, 
   3.62669625404884*^9, {3.804870597654211*^9, 3.804870598075777*^9}, {
   3.8048706421083584`*^9, 3.8048706425229297`*^9}, {3.8051020828316708`*^9, 
   3.805102167355263*^9}, {3.805102202608164*^9, 3.805102206949346*^9}, 
   3.805102581388358*^9, 3.8051069502531605`*^9, {3.8051070512545753`*^9, 
   3.805107053239428*^9}, {3.805107099392397*^9, 3.8051071016797934`*^9}, {
   3.8051078304575377`*^9, 3.8051078309732428`*^9}, {3.805108395682269*^9, 
   3.805108413799671*^9}, {3.805529437134689*^9, 3.8055294384203625`*^9}, {
   3.8055297835673447`*^9, 3.8055297851207395`*^9}},
 ExpressionUUID -> "9b00c93b-01a2-4bc9-b342-2670ce645581"],

Cell[BoxData[
 RowBox[{"Ng12Neg", ":=", 
  RowBox[{"(", 
   RowBox[{"signedSquareL", "[", 
    RowBox[{
     RowBox[{"1", "-", 
      FractionBox[
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          FractionBox["p1", "p2"], "-", "Bf12"}], ")"}], "2"], 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{"1", "-", "Bf12"}], ")"}], "2"]]}], ",", "eps"}], "]"}], 
   ")"}]}]], "Input",
 CellChangeTimes->{{3.51636244103125*^9, 3.5163624414375*^9}, {
   3.5163625370625*^9, 3.51636253753125*^9}, 3.568457440183836*^9, 
   3.6266962555059853`*^9, {3.8048705985063334`*^9, 3.8048705989518795`*^9}, {
   3.804870643127306*^9, 3.804870643450972*^9}, {3.80510218636352*^9, 
   3.8051022172602854`*^9}, 3.805102583314555*^9, 3.8051069467788057`*^9, {
   3.8051070550740027`*^9, 3.8051070563107834`*^9}, {3.8051071029180803`*^9, 
   3.8051071048091946`*^9}, {3.8051078356062007`*^9, 3.805107836512684*^9}, {
   3.8051083995944896`*^9, 3.8051084178019896`*^9}, {3.8055294393164377`*^9, 
   3.8055294401795473`*^9}, {3.8055297859468875`*^9, 3.8055297867051053`*^9}},
 ExpressionUUID -> "49ba611d-d315-456d-9dc4-f724281fcea5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Ng12", ":=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"onPositive", "[", 
      RowBox[{"p1", "-", "p2"}], "]"}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"onPositive", "[", 
         RowBox[{
          FractionBox["p2", "p1"], "-", "Bf12"}], "]"}], "Ng12Pos"}], " ", 
       "+", " ", 
       RowBox[{
        RowBox[{"onNegative", "[", 
         RowBox[{
          FractionBox["p2", "p1"], "-", "Bf12"}], "]"}], "Ng1"}]}], " ", 
      ")"}]}], "+", " ", 
    RowBox[{
     RowBox[{"onNegative", "[", 
      RowBox[{"p1", "-", "p2"}], "]"}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"onPositive", "[", 
         RowBox[{
          FractionBox["p1", "p2"], "-", "Bf12"}], "]"}], "Ng12Neg"}], " ", 
       "+", " ", 
       RowBox[{
        RowBox[{"onNegative", "[", 
         RowBox[{
          FractionBox["p1", "p2"], "-", "Bf12"}], "]"}], "Ng1"}]}], " ", 
      ")"}]}]}]}], ";"}]], "Input",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQBWIQzcDgdfOt0StHBoZaKO37FEw3VEDp+0I14SBaVBhM
M5jJQfj5YHrO+9jFXtNeOdpFyiwF0UEftPaAaGXhT2A6yFyo0xtI60uLd4Ho
EKf1XPGsrx1XqB4E0xrPVXKMw984HmKrANPrBM4Wg2j79folINpP8l0PiP7d
59MLoouVfv2wBtI7rv8F08bLin03RLxxfL3hK5he13/5JlfkG8dXS67fAdHh
BkavQXTYj04w/WCGwxcQfWzCVDDNWP5/UjWQPsKwcDKI3sk7fzWIdrI1Xw+i
10x3ORIc9cZR9yTPcRDdwOWzpgJIh7UdAdO++yZcB/OtBG6AaADMIKBv
  "],
 ExpressionUUID -> "e0127e99-91a2-4c82-a16d-b7d33e10c829"],

Cell[BoxData[
 RowBox[{"Ng32Pos", ":=", " ", 
  RowBox[{"(", 
   RowBox[{"signedSquareL", "[", 
    RowBox[{
     RowBox[{"1", "-", 
      FractionBox[
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          FractionBox["p2", "p3"], "-", "Bf32"}], ")"}], "2"], 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{"1", "-", "Bf32"}], ")"}], "2"]]}], ",", "eps"}], "]"}], 
   ")"}]}]], "Input",
 CellChangeTimes->{{3.516362438390625*^9, 3.51636243934375*^9}, {
   3.51636253609375*^9, 3.5163625365625*^9}, 3.568457441890836*^9, 
   3.62669625404884*^9, {3.804870597654211*^9, 3.804870598075777*^9}, {
   3.8048706421083584`*^9, 3.8048706425229297`*^9}, {3.8051020828316708`*^9, 
   3.805102167355263*^9}, {3.805102202608164*^9, 3.805102206949346*^9}, 
   3.805102581388358*^9, 3.8051069502531605`*^9, {3.8051070512545753`*^9, 
   3.805107053239428*^9}, {3.805107099392397*^9, 3.8051071016797934`*^9}, {
   3.8051078304575377`*^9, 3.8051078309732428`*^9}, {3.805108395682269*^9, 
   3.805108413799671*^9}, {3.8051084644290066`*^9, 3.8051084964765325`*^9}, {
   3.8055294481822934`*^9, 3.8055294493800583`*^9}, {3.8055298023779383`*^9, 
   3.805529803320966*^9}},
 ExpressionUUID -> "8fea452e-fa0c-4283-9786-d12abb2153c8"],

Cell[BoxData[
 RowBox[{"Ng32Neg", ":=", 
  RowBox[{"(", 
   RowBox[{"signedSquareL", "[", 
    RowBox[{
     RowBox[{"1", "-", 
      FractionBox[
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          FractionBox["p3", "p2"], "-", "Bf32"}], ")"}], "2"], 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{"1", "-", "Bf32"}], ")"}], "2"]]}], ",", "eps"}], "]"}], 
   ")"}]}]], "Input",
 CellChangeTimes->{{3.51636244103125*^9, 3.5163624414375*^9}, {
   3.5163625370625*^9, 3.51636253753125*^9}, 3.568457440183836*^9, 
   3.6266962555059853`*^9, {3.8048705985063334`*^9, 3.8048705989518795`*^9}, {
   3.804870643127306*^9, 3.804870643450972*^9}, {3.80510218636352*^9, 
   3.8051022172602854`*^9}, 3.805102583314555*^9, 3.8051069467788057`*^9, {
   3.8051070550740027`*^9, 3.8051070563107834`*^9}, {3.8051071029180803`*^9, 
   3.8051071048091946`*^9}, {3.8051078356062007`*^9, 3.805107836512684*^9}, {
   3.8051083995944896`*^9, 3.8051084178019896`*^9}, {3.805108473118527*^9, 
   3.80510849956081*^9}, {3.8055294501302843`*^9, 3.805529451148235*^9}, {
   3.805529804336918*^9, 3.805529805264961*^9}},
 ExpressionUUID -> "c58a4b20-11ab-4f91-b4d7-1eecc6d8a284"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Ng32", ":=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"onPositive", "[", 
      RowBox[{"p3", "-", "p2"}], "]"}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"onPositive", "[", 
         RowBox[{
          FractionBox["p2", "p3"], "-", "Bf32"}], "]"}], "Ng32Pos"}], " ", 
       "+", " ", 
       RowBox[{
        RowBox[{"onNegative", "[", 
         RowBox[{
          FractionBox["p2", "p3"], "-", "Bf32"}], "]"}], "Ng1"}]}], " ", 
      ")"}]}], "+", " ", 
    RowBox[{
     RowBox[{"onNegative", "[", 
      RowBox[{"p3", "-", "p2"}], "]"}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"onPositive", "[", 
         RowBox[{
          FractionBox["p3", "p2"], "-", "Bf"}], "]"}], "Ng32Neg"}], " ", "+", 
       " ", 
       RowBox[{
        RowBox[{"onNegative", "[", 
         RowBox[{
          FractionBox["p3", "p2"], "-", "Bf32"}], "]"}], "Ng1"}]}], " ", 
      ")"}]}]}]}], ";"}]], "Input",
 CellChangeTimes->{{3.5163624423125*^9, 3.51636244390625*^9}, {
   3.51636253840625*^9, 3.516362539765625*^9}, {3.535528086984375*^9, 
   3.535528088671875*^9}, {3.5355281776875*^9, 3.535528179484375*^9}, {
   3.568456986935499*^9, 3.568457000885894*^9}, {3.568457185341836*^9, 
   3.568457191564836*^9}, {3.568458824569253*^9, 3.5684588327220683`*^9}, {
   3.6266947414768467`*^9, 3.6266947420358467`*^9}, {3.8038147531532173`*^9, 
   3.803814755750825*^9}, {3.803814814408286*^9, 3.8038148174901423`*^9}, {
   3.803815015440589*^9, 3.8038150183924537`*^9}, {3.803832263816705*^9, 
   3.803832301427907*^9}, 3.8042498917037106`*^9, {3.8045948124087176`*^9, 
   3.804594815765251*^9}, {3.8047802401956553`*^9, 3.8047802643012695`*^9}, {
   3.8047803833144674`*^9, 3.8047803863243704`*^9}, {3.804780494310973*^9, 
   3.8047804971710234`*^9}, {3.805011109376071*^9, 3.8050111142712226`*^9}, {
   3.805011550402109*^9, 3.8050115576711683`*^9}, {3.8050123822102957`*^9, 
   3.8050124108054376`*^9}, {3.805453860072528*^9, 3.805453881188744*^9}, {
   3.8055294524468946`*^9, 3.8055294536846175`*^9}, {3.8055298070581107`*^9, 
   3.80552980857155*^9}, 3.8055349955610886`*^9},
 ExpressionUUID -> "e0127e99-91a2-4c82-a16d-b7d33e10c829"],

Cell[BoxData[
 RowBox[{"Ng14Pos", ":=", " ", 
  RowBox[{"(", 
   RowBox[{"signedSquareL", "[", 
    RowBox[{
     RowBox[{"1", "-", 
      FractionBox[
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          FractionBox["p4", "p1"], "-", "Bf14"}], ")"}], "2"], 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{"1", "-", "Bf14"}], ")"}], "2"]]}], ",", "eps"}], "]"}], 
   ")"}]}]], "Input",
 CellChangeTimes->{{3.516362438390625*^9, 3.51636243934375*^9}, {
   3.51636253609375*^9, 3.5163625365625*^9}, 3.568457441890836*^9, 
   3.62669625404884*^9, {3.804870597654211*^9, 3.804870598075777*^9}, {
   3.8048706421083584`*^9, 3.8048706425229297`*^9}, {3.8051020828316708`*^9, 
   3.805102167355263*^9}, {3.805102202608164*^9, 3.805102206949346*^9}, 
   3.805102581388358*^9, 3.8051069502531605`*^9, {3.8051070512545753`*^9, 
   3.805107053239428*^9}, {3.805107099392397*^9, 3.8051071016797934`*^9}, {
   3.8051078304575377`*^9, 3.8051078309732428`*^9}, {3.805108395682269*^9, 
   3.805108413799671*^9}, {3.805455359033637*^9, 3.8054553672561555`*^9}, {
   3.8055265944981575`*^9, 3.8055265952823477`*^9}, {3.8055268996733675`*^9, 
   3.8055269059685616`*^9}},
 ExpressionUUID -> "9b00c93b-01a2-4bc9-b342-2670ce645581"],

Cell[BoxData[
 RowBox[{"Ng14Neg", ":=", 
  RowBox[{"(", 
   RowBox[{"signedSquareL", "[", 
    RowBox[{
     RowBox[{"1", "-", 
      FractionBox[
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          FractionBox["p1", "p4"], "-", "Bf14"}], ")"}], "2"], 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{"1", "-", "Bf14"}], ")"}], "2"]]}], ",", "eps"}], "]"}], 
   ")"}]}]], "Input",
 CellChangeTimes->{{3.51636244103125*^9, 3.5163624414375*^9}, {
   3.5163625370625*^9, 3.51636253753125*^9}, 3.568457440183836*^9, 
   3.6266962555059853`*^9, {3.8048705985063334`*^9, 3.8048705989518795`*^9}, {
   3.804870643127306*^9, 3.804870643450972*^9}, {3.80510218636352*^9, 
   3.8051022172602854`*^9}, 3.805102583314555*^9, 3.8051069467788057`*^9, {
   3.8051070550740027`*^9, 3.8051070563107834`*^9}, {3.8051071029180803`*^9, 
   3.8051071048091946`*^9}, {3.8051078356062007`*^9, 3.805107836512684*^9}, {
   3.8051083995944896`*^9, 3.8051084178019896`*^9}, {3.8054553623492203`*^9, 
   3.8054553692550936`*^9}, {3.805526591978756*^9, 3.8055265926580553`*^9}, {
   3.8055269247042356`*^9, 3.805526925551361*^9}},
 ExpressionUUID -> "49ba611d-d315-456d-9dc4-f724281fcea5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Ng14", ":=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"onPositive", "[", 
      RowBox[{"p1", "-", "p4"}], "]"}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"onPositive", "[", 
         RowBox[{
          FractionBox["p4", "p1"], "-", "Bf14"}], "]"}], "Ng14Pos"}], " ", 
       "+", " ", 
       RowBox[{
        RowBox[{"onNegative", "[", 
         RowBox[{
          FractionBox["p4", "p1"], "-", "Bf14"}], "]"}], "Ng1"}]}], " ", 
      ")"}]}], "+", " ", 
    RowBox[{
     RowBox[{"onNegative", "[", 
      RowBox[{"p1", "-", "p4"}], "]"}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"onPositive", "[", 
         RowBox[{
          FractionBox["p1", "p4"], "-", "Bf14"}], "]"}], "Ng14Neg"}], " ", 
       "+", " ", 
       RowBox[{
        RowBox[{"onNegative", "[", 
         RowBox[{
          FractionBox["p1", "p4"], "-", "Bf14"}], "]"}], "Ng1"}]}], " ", 
      ")"}]}]}]}], ";"}]], "Input",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQBWIQzcDgdfOt0StHBoZaKO37FEw3VEDp+0I14SBaVBhM
M5jJQfj5YHrO+9jFXtNeOdpFyiwF0UEftPaAaGXhT2A6yFyo0xtI60uLd4Ho
EKf1XPGsrx1XqB4E0xrPVXKMw984HmKrANPrBM4Wg2j79folINpP8l0PiP7d
59MLoouVfv2wBtI7rv8F08bLin03RLxxfL3hK5he13/5JlfkG8dXS67fAdHh
BkavQXTYj04w/WCGwxcQfWzCVDDNWP5/UjWQPsKwcDKI3sk7fzWIdrI1Xw+i
10x3ORIc9cZR9yTPcRB9at3uphAgLZEo0AqipfhW3KoA0pnNhrdBNADGUZ/U

  "],
 ExpressionUUID -> "e0127e99-91a2-4c82-a16d-b7d33e10c829"],

Cell[BoxData[
 RowBox[{"Ng54Pos", ":=", " ", 
  RowBox[{"(", 
   RowBox[{"signedSquareL", "[", 
    RowBox[{
     RowBox[{"1", "-", 
      FractionBox[
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          FractionBox["p4", "p5"], "-", "Bf54"}], ")"}], "2"], 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{"1", "-", "Bf54"}], ")"}], "2"]]}], ",", "eps"}], "]"}], 
   ")"}]}]], "Input",
 CellChangeTimes->{{3.516362438390625*^9, 3.51636243934375*^9}, {
   3.51636253609375*^9, 3.5163625365625*^9}, 3.568457441890836*^9, 
   3.62669625404884*^9, {3.804870597654211*^9, 3.804870598075777*^9}, {
   3.8048706421083584`*^9, 3.8048706425229297`*^9}, {3.8051020828316708`*^9, 
   3.805102167355263*^9}, {3.805102202608164*^9, 3.805102206949346*^9}, 
   3.805102581388358*^9, 3.8051069502531605`*^9, {3.8051070512545753`*^9, 
   3.805107053239428*^9}, {3.805107099392397*^9, 3.8051071016797934`*^9}, {
   3.8051078304575377`*^9, 3.8051078309732428`*^9}, {3.805108395682269*^9, 
   3.805108413799671*^9}, {3.8051084644290066`*^9, 3.8051084964765325`*^9}, {
   3.805455428743731*^9, 3.8054554479728956`*^9}, {3.8055265899468517`*^9, 
   3.8055265908738956`*^9}, {3.80552693117556*^9, 3.8055269416647406`*^9}, {
   3.8055435282460527`*^9, 3.80554352928498*^9}, 3.8056156941558247`*^9},
 ExpressionUUID -> "8fea452e-fa0c-4283-9786-d12abb2153c8"],

Cell[BoxData[
 RowBox[{"Ng54Neg", ":=", 
  RowBox[{"(", 
   RowBox[{"signedSquareL", "[", 
    RowBox[{
     RowBox[{"1", "-", 
      FractionBox[
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          FractionBox["p5", "p4"], "-", "Bf54"}], ")"}], "2"], 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{"1", "-", "Bf54"}], ")"}], "2"]]}], ",", "eps"}], "]"}], 
   ")"}]}]], "Input",
 CellChangeTimes->{{3.51636244103125*^9, 3.5163624414375*^9}, {
   3.5163625370625*^9, 3.51636253753125*^9}, 3.568457440183836*^9, 
   3.6266962555059853`*^9, {3.8048705985063334`*^9, 3.8048705989518795`*^9}, {
   3.804870643127306*^9, 3.804870643450972*^9}, {3.80510218636352*^9, 
   3.8051022172602854`*^9}, 3.805102583314555*^9, 3.8051069467788057`*^9, {
   3.8051070550740027`*^9, 3.8051070563107834`*^9}, {3.8051071029180803`*^9, 
   3.8051071048091946`*^9}, {3.8051078356062007`*^9, 3.805107836512684*^9}, {
   3.8051083995944896`*^9, 3.8051084178019896`*^9}, {3.805108473118527*^9, 
   3.80510849956081*^9}, {3.805455436343891*^9, 3.8054554496062202`*^9}, {
   3.805526586754145*^9, 3.8055265880987577`*^9}, {3.805526942784585*^9, 
   3.805526943719621*^9}, {3.8055435295157423`*^9, 3.8055435305626636`*^9}, 
   3.805615696044875*^9, {3.80561592361913*^9, 3.8056159274991283`*^9}},
 ExpressionUUID -> "c58a4b20-11ab-4f91-b4d7-1eecc6d8a284"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Ng54", ":=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"onPositive", "[", 
      RowBox[{"p5", "-", "p4"}], "]"}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"onPositive", "[", 
         RowBox[{
          FractionBox["p4", "p5"], "-", "Bf54"}], "]"}], "Ng54Pos"}], " ", 
       "+", " ", 
       RowBox[{
        RowBox[{"onNegative", "[", 
         RowBox[{
          FractionBox["p4", "p5"], "-", "Bf54"}], "]"}], "Ng1"}]}], " ", 
      ")"}]}], "+", " ", 
    RowBox[{
     RowBox[{"onNegative", "[", 
      RowBox[{"p5", "-", "p4"}], "]"}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"onPositive", "[", 
         RowBox[{
          FractionBox["p5", "p4"], "-", "Bf54"}], "]"}], "Ng54Neg"}], " ", 
       "+", " ", 
       RowBox[{
        RowBox[{"onNegative", "[", 
         RowBox[{
          FractionBox["p5", "p4"], "-", "Bf54"}], "]"}], "Ng1"}]}], " ", 
      ")"}]}]}]}], ";"}]], "Input",
 CellChangeTimes->{{3.5163624423125*^9, 3.51636244390625*^9}, {
   3.51636253840625*^9, 3.516362539765625*^9}, {3.535528086984375*^9, 
   3.535528088671875*^9}, {3.5355281776875*^9, 3.535528179484375*^9}, {
   3.568456986935499*^9, 3.568457000885894*^9}, {3.568457185341836*^9, 
   3.568457191564836*^9}, {3.568458824569253*^9, 3.5684588327220683`*^9}, {
   3.6266947414768467`*^9, 3.6266947420358467`*^9}, {3.8038147531532173`*^9, 
   3.803814755750825*^9}, {3.803814814408286*^9, 3.8038148174901423`*^9}, {
   3.803815015440589*^9, 3.8038150183924537`*^9}, {3.803832263816705*^9, 
   3.803832301427907*^9}, 3.8042498917037106`*^9, {3.8045948124087176`*^9, 
   3.804594815765251*^9}, {3.8047802401956553`*^9, 3.8047802643012695`*^9}, {
   3.8047803833144674`*^9, 3.8047803863243704`*^9}, {3.804780494310973*^9, 
   3.8047804971710234`*^9}, {3.805011109376071*^9, 3.8050111142712226`*^9}, {
   3.805011550402109*^9, 3.8050115576711683`*^9}, {3.8050123822102957`*^9, 
   3.8050124108054376`*^9}, {3.805453860072528*^9, 3.805453881188744*^9}, {
   3.805455485095604*^9, 3.805455504423667*^9}, {3.8055298223633237`*^9, 
   3.805529825723857*^9}, {3.8055435312979045`*^9, 3.8055435340910234`*^9}, {
   3.805615699253565*^9, 3.8056157030126886`*^9}, {3.8056158864215*^9, 
   3.805615891278494*^9}},
 ExpressionUUID -> "e0127e99-91a2-4c82-a16d-b7d33e10c829"]
}, Open  ]],

Cell[CellGroupData[{

Cell["The system of equations", "Subsection",
 Evaluatable->False,
 PageBreakAbove->False,
 ExpressionUUID -> "c5571497-8955-4b3c-beda-9786edc2a9aa"],

Cell["The spool position is recalculated.", "Text",
 CellChangeTimes->{{3.8036342377161274`*^9, 3.803634252753645*^9}, {
  3.8048570859515133`*^9, 3.804857115838684*^9}},
 ExpressionUUID -> "6e2cb804-6aa4-45d1-a7a6-46ac2e220b0e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xine", "=", 
   RowBox[{
    RowBox[{"2", " ", "xin"}], "-", "1"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.80485618712088*^9, 3.8048562071662035`*^9}, {
   3.8048562421900764`*^9, 3.804856266230278*^9}, 3.8048570580712714`*^9},
 ExpressionUUID -> "d9d41391-daaa-453f-a019-9584355bb2d3"],

Cell["\<\
The valve areas are limited between 0 and A1max and A3max respectively .\
\>", "Text",
 CellChangeTimes->{{3.8036342377161274`*^9, 3.803634252753645*^9}, {
   3.804925406473482*^9, 3.80492543148868*^9}, {3.8049255329120903`*^9, 
   3.8049255789765744`*^9}, 3.8050132961310015`*^9, 3.8050144886985893`*^9},
 ExpressionUUID -> "6e2cb804-6aa4-45d1-a7a6-46ac2e220b0e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"A12", "=", 
   RowBox[{"A1max", " ", 
    RowBox[{"limit", "[", 
     RowBox[{
      RowBox[{"(", 
       FractionBox[
        RowBox[{"xine", "-", "x0"}], 
        RowBox[{"1", "-", "x0"}]], ")"}], ",", "0", ",", "1"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"A32", "=", 
   RowBox[{"A3max", " ", 
    RowBox[{"limit", "[", 
     RowBox[{
      RowBox[{"(", 
       FractionBox[
        RowBox[{
         RowBox[{"-", "xine"}], "-", "x0"}], 
        RowBox[{"1", "-", "x0"}]], ")"}], ",", "0", ",", "1"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"A14", "=", 
   RowBox[{"A1max", " ", 
    RowBox[{"limit", "[", 
     RowBox[{
      RowBox[{"(", 
       FractionBox[
        RowBox[{
         RowBox[{"-", "xine"}], "-", "x0"}], 
        RowBox[{"1", "-", "x0"}]], ")"}], ",", "0", ",", "1"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"A54", "=", 
   RowBox[{"A3max", " ", 
    RowBox[{"limit", "[", 
     RowBox[{
      RowBox[{"(", 
       FractionBox[
        RowBox[{"xine", "-", "x0"}], 
        RowBox[{"1", "-", "x0"}]], ")"}], ",", "0", ",", "1"}], "]"}]}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.8036342254795046`*^9, 3.8036342331107635`*^9}, {
   3.8038812411753454`*^9, 3.803881264624159*^9}, {3.8042501867423787`*^9, 
   3.804250225152755*^9}, {3.804250289307581*^9, 3.8042502933444166`*^9}, {
   3.804330837491709*^9, 3.8043309198355713`*^9}, {3.8048376890103693`*^9, 
   3.804837749066965*^9}, {3.80485373294905*^9, 3.8048537346423006`*^9}, {
   3.8048570727521276`*^9, 3.804857077327409*^9}, 3.8049214860616345`*^9, {
   3.805013299116004*^9, 3.805013302204735*^9}, {3.805014256632596*^9, 
   3.8050142592720647`*^9}, {3.8050145583552456`*^9, 
   3.8050145629481525`*^9}, {3.8050147271839695`*^9, 3.805014727816914*^9}, 
   3.805543535062022*^9},
 ExpressionUUID -> "d4555a41-73a0-460c-8a4c-dd2268e49288"],

Cell["Calculation of the Ng functions for flow calculations.", "Text",
 CellChangeTimes->{{3.803634260546183*^9, 3.8036342655113525`*^9}, {
  3.8047461774905787`*^9, 3.804746198521885*^9}},
 ExpressionUUID -> "fbc6ac93-5130-4905-8ff0-27a02bcad99f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Ng1", "=", "1"}], ";"}]], "Input",
 CellChangeTimes->{3.51635891059375*^9, 3.626691991670635*^9},
 ExpressionUUID -> "aa92a39f-08b0-45e1-95b7-8c46f8b9b9cd"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Equations", "Subsection",
 CellChangeTimes->{{3.5720181646087046`*^9, 3.572018175085304*^9}},
 ExpressionUUID -> "a2916a4d-8fbb-4d1c-8b7e-bcd550214e3b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"localExpressions", " ", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"cp", "==", 
     RowBox[{"cv", "+", "R"}]}], "\[IndentingNewLine]", "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{
  3.4458556656834745`*^9, {3.535528705078125*^9, 3.5355287096875*^9}, {
   3.572017731163913*^9, 3.5720178003058677`*^9}, {3.6266954587713203`*^9, 
   3.6266954813855815`*^9}, {3.6266956813155727`*^9, 
   3.6266957169681373`*^9}, {3.626695850528492*^9, 3.626695939328371*^9}, {
   3.6267882846603336`*^9, 3.626788286066334*^9}, {3.805015032534855*^9, 
   3.8050150348708344`*^9}, {3.805541341182918*^9, 3.805541344157849*^9}, {
   3.805542590819909*^9, 3.805542591335378*^9}, {3.805542630843624*^9, 
   3.8055426677365685`*^9}},
 ExpressionUUID -> "3dce3a4d-0f1b-4201-a446-f7764743c02d"],

Cell["Expressions for enthalpy flows and mass flows.", "Text",
 CellChangeTimes->{{3.804746240036062*^9, 3.8047462706494865`*^9}, {
  3.8050234936250772`*^9, 3.8050234975369177`*^9}, {3.8050236133720446`*^9, 
  3.805023619226123*^9}},
 ExpressionUUID -> "43913fb2-669a-4524-ac5e-12187c8eeb66"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dE12", "=", 
   RowBox[{"qm12", " ", "cp", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"onNegative", "[", "qm12", "]"}], " ", "T2"}], "+", 
      RowBox[{
       RowBox[{"onPositive", "[", "qm12", "]"}], " ", "T1"}]}], ")"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dE32", "=", 
   RowBox[{"qm32", " ", "cp", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"onNegative", "[", "qm32", "]"}], " ", "T2"}], "+", 
      RowBox[{
       RowBox[{"onPositive", "[", "qm32", "]"}], " ", "T3"}]}], ")"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dE14", "=", 
   RowBox[{"qm14", " ", "cp", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"onNegative", "[", "qm14", "]"}], " ", "T4"}], "+", 
      RowBox[{
       RowBox[{"onPositive", "[", "qm14", "]"}], " ", "T1"}]}], ")"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"dE54", "=", 
    RowBox[{"qm54", " ", "cp", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"onNegative", "[", "qm54", "]"}], " ", "T4"}], "+", 
       RowBox[{
        RowBox[{"onPositive", "[", "qm54", "]"}], " ", "T3"}]}], ")"}]}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qm12", "=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"onPositive", "[", 
       RowBox[{"p1", "-", "p2"}], "]"}], " ", "qm12Pos"}], " ", "-", " ", 
     RowBox[{
      RowBox[{"onNegative", "[", 
       RowBox[{"p1", "-", "p2"}], "]"}], " ", "qm12Neg"}]}], ")"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qm32", "=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"onPositive", "[", 
       RowBox[{"p3", "-", "p2"}], "]"}], " ", "qm32Pos"}], " ", "-", " ", 
     RowBox[{
      RowBox[{"onNegative", "[", 
       RowBox[{"p3", "-", "p2"}], "]"}], " ", "qm32Neg"}]}], ")"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qm14", "=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"onPositive", "[", 
       RowBox[{"p1", "-", "p4"}], "]"}], " ", "qm14Pos"}], " ", "-", " ", 
     RowBox[{
      RowBox[{"onNegative", "[", 
       RowBox[{"p1", "-", "p4"}], "]"}], " ", "qm14Neg"}]}], ")"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qm54", "=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"onPositive", "[", 
       RowBox[{"p5", "-", "p4"}], "]"}], " ", "qm54Pos"}], " ", "-", " ", 
     RowBox[{
      RowBox[{"onNegative", "[", 
       RowBox[{"p5", "-", "p4"}], "]"}], " ", "qm54Neg"}]}], ")"}]}], 
  ";"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.80383237607591*^9, 3.803832396131222*^9}, {
   3.8038324427980857`*^9, 3.8038324720249352`*^9}, {3.803838233573867*^9, 
   3.803838237124206*^9}, {3.8038382723089123`*^9, 3.803838277692359*^9}, {
   3.8038383135553665`*^9, 3.8038383229626627`*^9}, {3.8038383620823097`*^9, 
   3.8038384130417457`*^9}, {3.803879179048441*^9, 3.8038792169093857`*^9}, {
   3.8042446636414843`*^9, 3.8042447280930023`*^9}, {3.8043298347662134`*^9, 
   3.8043298969482193`*^9}, {3.804595261524449*^9, 3.8045952702194805`*^9}, {
   3.8047734459314575`*^9, 3.8047734583975983`*^9}, {3.8047735183527536`*^9, 
   3.8047735332284117`*^9}, {3.8047735897580986`*^9, 3.804773596479166*^9}, {
   3.804773639196103*^9, 3.804773641985228*^9}, {3.8050134070241923`*^9, 
   3.805013489328255*^9}, {3.8050142983794956`*^9, 3.8050143323871527`*^9}, {
   3.8050146165269275`*^9, 3.805014627908907*^9}, {3.8050147520594854`*^9, 
   3.8050147656028147`*^9}, 3.8050149800173407`*^9, 3.8050150486666126`*^9, {
   3.8055435357073555`*^9, 3.8055435385664062`*^9}, {3.8056161243081217`*^9, 
   3.805616125929469*^9}},
 ExpressionUUID -> "8277733c-2a5f-43f8-9d0e-67696feecb74"],

Cell["The system equations to be solved in each time step", "Text",
 CellChangeTimes->{{3.8047462843423653`*^9, 
  3.8047463091677523`*^9}},ExpressionUUID->"83de048e-9db7-455a-bff4-\
09172eb1a580"],

Cell[BoxData[
 RowBox[{
  RowBox[{"systemEquationsDA", "=", 
   RowBox[{"Simplify", "[", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"qm12Pos", "==", 
       RowBox[{"Cf12", " ", "p1", " ", "p0", " ", 
        SqrtBox[
         FractionBox["T0", "T1"]], "Ng12"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"qm12Neg", "==", 
       RowBox[{"Cf12", " ", "p2", " ", "p0", " ", 
        SqrtBox[
         FractionBox["T0", "T2"]], "Ng12"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"qm32Pos", "==", 
       RowBox[{"Cf32", " ", "p3", " ", "p0", " ", 
        SqrtBox[
         FractionBox["T0", "T3"]], "Ng32"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"qm32Neg", "\[Equal]", 
       RowBox[{"Cf32", " ", "p2", " ", "p0", " ", 
        SqrtBox[
         FractionBox["T0", "T2"]], "Ng32"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"qm14Pos", "==", 
       RowBox[{"Cf14", " ", "p1", " ", "p0", " ", 
        SqrtBox[
         FractionBox["T0", "T1"]], "Ng14"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"qm14Neg", "==", 
       RowBox[{"Cf14", " ", "p4", " ", "p0", " ", 
        SqrtBox[
         FractionBox["T0", "T4"]], "Ng14"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"qm54Pos", "==", 
       RowBox[{"Cf54", " ", "p5", " ", "p0", " ", 
        SqrtBox[
         FractionBox["T0", "T5"]], "Ng54"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"qm54Neg", "\[Equal]", 
       RowBox[{"Cf54", " ", "p4", " ", "p0", " ", 
        SqrtBox[
         FractionBox["T0", "T4"]], "Ng54"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"dE1", "\[Equal]", 
       RowBox[{
        RowBox[{"-", "dE12"}], "-", "dE14"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"dE2", "\[Equal]", 
       RowBox[{"dE12", "+", "dE32"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"dE3", "\[Equal]", 
       RowBox[{"-", "dE32"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"dE4", "\[Equal]", 
       RowBox[{"dE14", "+", "dE54"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"dE5", "\[Equal]", 
       RowBox[{"-", "dE54"}]}]}], "\[IndentingNewLine]", "\t", "}"}], "]"}]}],
   ";"}]], "Input",
 CellChangeTimes->{{3.516357230546875*^9, 3.51635723375*^9}, {
   3.516357406265625*^9, 3.51635741015625*^9}, {3.516357489421875*^9, 
   3.5163574921875*^9}, {3.516358561203125*^9, 3.5163585623125*^9}, {
   3.5163588638125*^9, 3.516358872546875*^9}, 3.5163622335*^9, 
   3.516362283375*^9, 3.516362316140625*^9, {3.516362447*^9, 
   3.51636244796875*^9}, {3.51636254234375*^9, 3.516362542796875*^9}, {
   3.53552809378125*^9, 3.53552809640625*^9}, {3.535528183453125*^9, 
   3.53552818775*^9}, {3.5684570204198475`*^9, 3.568457022761081*^9}, {
   3.5684570541492195`*^9, 3.5684570555233574`*^9}, {3.5684589588056755`*^9, 
   3.5684589653553305`*^9}, {3.5720176679082947`*^9, 3.572017683947212*^9}, 
   3.5720179338355055`*^9, {3.626691880745544*^9, 3.6266918864211116`*^9}, 
   3.6266931723286896`*^9, {3.6266937584923*^9, 3.6266939161240616`*^9}, 
   3.626694036263074*^9, 3.6266946351268463`*^9, {3.6266948812055693`*^9, 
   3.626694912361685*^9}, {3.626786603246106*^9, 3.6267866300827894`*^9}, {
   3.6267867846422443`*^9, 3.6267868052153015`*^9}, {3.803813600915059*^9, 
   3.803813601819543*^9}, {3.8038136362489204`*^9, 3.803813637479523*^9}, {
   3.8038139397390347`*^9, 3.803813963431733*^9}, {3.803814574885434*^9, 
   3.803814604078475*^9}, {3.8038147583283463`*^9, 3.803814764137517*^9}, {
   3.803814820319522*^9, 3.8038148306362686`*^9}, {3.8038150195607843`*^9, 
   3.8038150256887856`*^9}, {3.8038323443356476`*^9, 
   3.8038323669093623`*^9}, {3.803832485537998*^9, 3.8038324962919044`*^9}, {
   3.80383837399702*^9, 3.803838378510364*^9}, {3.803838452862671*^9, 
   3.803838477349411*^9}, {3.8038788068094063`*^9, 3.8038788579816217`*^9}, {
   3.8038789114125137`*^9, 3.8038789130618067`*^9}, {3.803878944596278*^9, 
   3.803878978978812*^9}, 3.803879232824969*^9, {3.8038792848812723`*^9, 
   3.8038793326220284`*^9}, 3.8038808992640285`*^9, {3.803881076163557*^9, 
   3.803881084063407*^9}, {3.803881119528825*^9, 3.803881122846402*^9}, {
   3.8038812060086203`*^9, 3.803881218326913*^9}, {3.80424450481032*^9, 
   3.804244531639645*^9}, {3.804329927870107*^9, 3.804329931581786*^9}, {
   3.804329985944465*^9, 3.8043300445859423`*^9}, {3.804330086104957*^9, 
   3.804330146425871*^9}, {3.804343144266903*^9, 3.80434314577536*^9}, {
   3.8044052563621235`*^9, 3.804405260508961*^9}, {3.804589635428796*^9, 
   3.8045896435873804`*^9}, {3.804594218155691*^9, 3.804594220578191*^9}, {
   3.804595095221991*^9, 3.8045950982268934`*^9}, 3.804595345574751*^9, {
   3.804773459491471*^9, 3.8047734688308353`*^9}, {3.8047735355570073`*^9, 
   3.8047735482868767`*^9}, {3.8047735971185064`*^9, 
   3.8047735998317075`*^9}, {3.8047736429182663`*^9, 
   3.8047736460290556`*^9}, {3.8050134971542053`*^9, 
   3.8050135412951593`*^9}, {3.8050143397793303`*^9, 3.805014393142315*^9}, {
   3.805014633479599*^9, 3.805014668161903*^9}, {3.8050147674940705`*^9, 
   3.8050147795306587`*^9}, 3.805014943651765*^9, {3.805455568669397*^9, 
   3.805455634417577*^9}, 3.8054560708467517`*^9, {3.8055435392706795`*^9, 
   3.8055435675095215`*^9}, {3.805543600949027*^9, 3.8055436403963375`*^9}, 
   3.8056161412056923`*^9, 3.8056163240720615`*^9},
 ExpressionUUID -> "cc01b7ab-0e24-4eb8-94a2-02519e9b1d7d"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Boundaries", "Subsection",
 CellChangeTimes->{{3.8050179915385733`*^9, 3.8050179925094385`*^9}},
 ExpressionUUID -> "c9b83533-6c3b-4ba2-8e82-200441668409"],

Cell["The boundary equations for transmission line ports", "Text",
 CellChangeTimes->{{3.804746317156512*^9, 
  3.8047463535379844`*^9}},ExpressionUUID->"db41c331-92ca-48f4-a665-\
2783204ff18e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"systemBoundaryEquations", " ", "=", " ", 
   RowBox[{"{", " ", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"p1", " ", "==", 
      RowBox[{"(", 
       RowBox[{"c1", " ", "+", " ", 
        RowBox[{"Zc1", " ", "dE1"}]}], ")"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"p2", " ", "==", 
      RowBox[{"(", 
       RowBox[{"c2", " ", "+", " ", 
        RowBox[{"Zc2", " ", "dE2"}]}], ")"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"p3", " ", "==", 
      RowBox[{"(", 
       RowBox[{"c3", " ", "+", " ", 
        RowBox[{"Zc3", " ", "dE3"}]}], ")"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"p4", " ", "==", 
      RowBox[{"(", 
       RowBox[{"c4", " ", "+", " ", 
        RowBox[{"Zc4", " ", "dE4"}]}], ")"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"p5", " ", "==", 
      RowBox[{"(", 
       RowBox[{"c5", " ", "+", " ", 
        RowBox[{"Zc5", " ", "dE5"}]}], ")"}]}]}], "\[IndentingNewLine]", 
    "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.535370830684037*^9, 3.535370830684037*^9}, {
   3.572017824436248*^9, 3.5720178479275913`*^9}, 3.8036343375137377`*^9, {
   3.8038147645287867`*^9, 3.803814766449218*^9}, {3.8038148317046523`*^9, 
   3.8038148345849953`*^9}, {3.803815027032193*^9, 3.803815029415818*^9}, {
   3.803879036853116*^9, 3.80387905140011*^9}, {3.804246374831381*^9, 
   3.804246378656437*^9}, {3.8043301576482954`*^9, 3.804330166016487*^9}, {
   3.8045893035121727`*^9, 3.804589307920622*^9}, {3.804773470114512*^9, 
   3.8047734720625024`*^9}, {3.804773549431696*^9, 3.804773551532529*^9}, {
   3.8047736008256826`*^9, 3.80477360307736*^9}, {3.8047736469980555`*^9, 
   3.804773649187797*^9}, {3.805013544678584*^9, 3.805013546143323*^9}, {
   3.8050143972486534`*^9, 3.8050143996627965`*^9}, {3.805014669485262*^9, 
   3.8050146717632275`*^9}, {3.805014785109968*^9, 3.805014786482767*^9}, {
   3.8055429199643965`*^9, 3.805542931543451*^9}, {3.8055436774251413`*^9, 
   3.805543684657682*^9}},
 ExpressionUUID -> "096b47ac-1067-49dc-aae2-345c4e0b0101"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Independent  Variables", "Subsection",
 CellChangeTimes->{{3.6267881656593337`*^9, 3.6267881959573336`*^9}},
 ExpressionUUID -> "7aee13e0-4e61-4e17-a44c-47e7f85d055c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"systemVariables", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
    "qm12Pos", ",", "qm12Neg", ",", "qm32Pos", ",", "qm32Neg", ",", "qm14Pos",
      ",", "qm14Neg", ",", "qm54Pos", ",", "qm54Neg", ",", "dE1", ",", "dE2", 
     ",", "dE3", ",", "dE4", ",", "dE5", ",", "p1", ",", "p2", ",", "p3", ",",
      "p4", ",", "p5"}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.572018112971751*^9, 3.5720181129797516`*^9}, {
   3.626786645653346*^9, 3.6267866499337745`*^9}, 3.803813603425622*^9, 
   3.803813638726808*^9, {3.8038139419706807`*^9, 3.8038139645842676`*^9}, {
   3.803814578963583*^9, 3.803814605431775*^9}, {3.8038147676781607`*^9, 
   3.80381476850732*^9}, {3.8038148358126736`*^9, 3.803814837399825*^9}, {
   3.803815030231347*^9, 3.8038150317115126`*^9}, {3.8038790662348075`*^9, 
   3.8038791482881703`*^9}, {3.803880885646076*^9, 3.803880907960059*^9}, 
   3.8043301822193403`*^9, {3.8043302232986097`*^9, 3.8043302623110247`*^9}, 
   3.804343165556447*^9, {3.804589672114957*^9, 3.8045896926008244`*^9}, 
   3.8045951053705225`*^9, {3.8047734729745693`*^9, 3.8047734734310904`*^9}, {
   3.8047735524345984`*^9, 3.804773553131879*^9}, {3.8047736037776375`*^9, 
   3.8047736042091923`*^9}, {3.80477365010585*^9, 3.804773650935993*^9}, {
   3.805013547936124*^9, 3.805013569966762*^9}, {3.8050144015004883`*^9, 
   3.8050144049803495`*^9}, {3.8050146729333415`*^9, 
   3.8050146763132105`*^9}, {3.8050147876557636`*^9, 3.805014790943303*^9}, {
   3.805542938271511*^9, 3.805542942279377*^9}, {3.805543543906898*^9, 
   3.805543544390399*^9}, {3.8055436458097534`*^9, 3.8055436733203783`*^9}},
 ExpressionUUID -> "fe51b2c5-a53c-4507-b908-0368ca8c172a"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Expressions", "Subsection",ExpressionUUID->"10c249fb-6d63-498e-a531-ba636643e74d"],

Cell["\<\
Variables are calculated that are not directly involved in the system \
equations. The inlet flow is calculated as the outlet flow with reversed sign.\
\>", "Text",
 CellChangeTimes->{{3.8047463779198356`*^9, 3.8047464099747696`*^9}},
 ExpressionUUID -> "42d118ef-f168-49d8-a2d9-b82ec1237dcd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"expressions", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"qm1", " ", "==", " ", 
      RowBox[{
       RowBox[{"-", "qm12"}], " ", "-", " ", "qm14"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"qm2", " ", "==", " ", 
      RowBox[{"qm12", " ", "+", " ", "qm32"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"qm3", " ", "==", " ", 
      RowBox[{"-", "qm32"}]}], " ", ",", "\[IndentingNewLine]", 
     RowBox[{"qm4", " ", "==", " ", 
      RowBox[{"qm14", "+", "qm54"}]}], " ", ",", "\[IndentingNewLine]", 
     RowBox[{"qm5", " ", "==", " ", 
      RowBox[{"-", "qm54"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"Ng32e", "==", "Ng32"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Ng12e", "==", "Ng12"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Ng54e", "==", "Ng54"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Ng14e", "==", "Ng14"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Bfe", "\[Equal]", "Bf"}]}], "\n", "   ", "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{
  3.8038147721570067`*^9, 3.8038148386372843`*^9, 3.8038150328018894`*^9, {
   3.8044053445348654`*^9, 3.8044053558825912`*^9}, 3.8045897102436247`*^9, {
   3.8045950711847854`*^9, 3.8045950711887817`*^9}, {3.804595468509948*^9, 
   3.8045954915521746`*^9}, {3.8047734745419445`*^9, 3.804773477071336*^9}, {
   3.8047735606900826`*^9, 3.804773563590092*^9}, 3.8047736049903865`*^9, 
   3.804773652044851*^9, {3.805013572903577*^9, 3.8050135830580597`*^9}, {
   3.805014409309025*^9, 3.805014413554208*^9}, {3.8050144456841593`*^9, 
   3.805014449480112*^9}, {3.80501467925416*^9, 3.805014681460928*^9}, {
   3.805014792817201*^9, 3.805014795795804*^9}, {3.805023988434838*^9, 
   3.805024032501109*^9}, {3.805525309275005*^9, 3.805525309771493*^9}, 
   3.805525497428443*^9, 3.8055260034368134`*^9, {3.8055429500503626`*^9, 
   3.80554300919835*^9}, {3.8055432275081615`*^9, 3.8055432693160367`*^9}, {
   3.8055433007486143`*^9, 3.8055433082119155`*^9}, 3.805543350397403*^9, {
   3.8055434849805794`*^9, 3.8055434916496983`*^9}},
 ExpressionUUID -> "52249328-bf8f-4534-9a6e-18460255eed0"],

Cell[BoxData[
 RowBox[{"Compgen", "[", "file", "]"}]], "Input",
 ExpressionUUID -> "f9091d30-60b2-4284-8990-0c9fbbe94279"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1159, 630},
WindowMargins->{{Automatic, 329}, {Automatic, 138}},
PrintingCopies->1,
PrintingPageRange->{32000, 32000},
PrintingOptions->{"Magnification"->1.,
"PaperOrientation"->"Portrait",
"PaperSize"->{595.1999999999999, 841.92}},
PrivateNotebookOptions->{"VersionedStylesheet"->{"Default.nb"[8.] -> False}},
FrontEndVersion->"11.0 for Microsoft Windows (64-bit) (September 21, 2016)",
StyleDefinitions->"Default.nb",
ExpressionUUID -> "aabbf272-7e04-4538-a8f6-5461d068751a"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 404, 6, 70, "Section"],
Cell[987, 30, 355, 6, 30, "Input",
 CellGroupingRules->{"GroupTogetherGrouping", 10000.}],
Cell[1345, 38, 203, 3, 30, "Text"],
Cell[1551, 43, 529, 12, 30, "Input"],
Cell[2083, 57, 788, 15, 30, "Input",
 CellGroupingRules->{"GroupTogetherGrouping", 10000.}],
Cell[CellGroupData[{
Cell[2896, 76, 1964, 40, 183, "Input",
 CellGroupingRules->{"GroupTogetherGrouping", 10001.}],
Cell[4863, 118, 4082, 58, 30, "Output",
 CellGroupingRules->{"GroupTogetherGrouping", 10001.}],
Cell[8948, 178, 376, 8, 30, "Input",
 CellGroupingRules->{"GroupTogetherGrouping", 10001.}]
}, Closed]],
Cell[CellGroupData[{
Cell[9361, 191, 98, 0, 41, "Subsection"],
Cell[9462, 193, 1151, 17, 68, "Text"],
Cell[10616, 212, 13853, 173, 143, "Graphics"],
Cell[24472, 387, 2486, 53, 215, "Input"],
Cell[26961, 442, 646, 13, 69, "Input"],
Cell[27610, 457, 3298, 70, 297, "Input"],
Cell[30911, 529, 1846, 33, 145, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[32794, 567, 149, 3, 49, "Subsection",
 Evaluatable->False,
 PageBreakAbove->False],
Cell[32946, 572, 230, 4, 30, "Text"],
Cell[33179, 578, 240, 6, 30, "Input"],
Cell[33422, 586, 374, 6, 30, "Text"],
Cell[33799, 594, 1977, 53, 170, "Input"],
Cell[35779, 649, 738, 14, 88, "Input"],
Cell[36520, 665, 249, 4, 30, "Text"],
Cell[36772, 671, 191, 4, 30, "Input"],
Cell[36966, 677, 1192, 25, 74, "Input"],
Cell[38161, 704, 1145, 24, 74, "Input"],
Cell[39309, 730, 1449, 42, 94, "Input"],
Cell[40761, 774, 1246, 26, 74, "Input"],
Cell[42010, 802, 1188, 25, 74, "Input"],
Cell[43201, 829, 2213, 50, 94, "Input"],
Cell[45417, 881, 1246, 26, 74, "Input"],
Cell[46666, 909, 1195, 25, 74, "Input"],
Cell[47864, 936, 1454, 43, 94, "Input"],
Cell[49321, 981, 1368, 27, 74, "Input"],
Cell[50692, 1010, 1363, 27, 74, "Input"],
Cell[52058, 1039, 2338, 52, 94, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[54433, 1096, 149, 3, 49, "Subsection",
 Evaluatable->False,
 PageBreakAbove->False],
Cell[54585, 1101, 229, 3, 30, "Text"],
Cell[54817, 1106, 323, 7, 30, "Input"],
Cell[55143, 1115, 374, 6, 30, "Text"],
Cell[55520, 1123, 1937, 53, 170, "Input"],
Cell[57460, 1178, 248, 3, 30, "Text"],
Cell[57711, 1183, 191, 4, 30, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[57939, 1192, 158, 2, 49, "Subsection"],
Cell[58100, 1196, 822, 16, 69, "Input"],
Cell[58925, 1214, 293, 4, 30, "Text"],
Cell[59221, 1220, 3797, 101, 202, "Input"],
Cell[63021, 1323, 197, 3, 30, "Text"],
Cell[63221, 1328, 5330, 94, 573, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[68588, 1427, 161, 2, 49, "Subsection"],
Cell[68752, 1431, 194, 3, 30, "Text"],
Cell[68949, 1436, 2041, 40, 145, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[71027, 1481, 173, 2, 49, "Subsection"],
Cell[71203, 1485, 1701, 26, 30, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[72941, 1516, 88, 0, 49, "Subsection"],
Cell[73032, 1518, 303, 5, 30, "Text"],
Cell[73338, 1525, 2147, 38, 240, "Input"],
Cell[75488, 1565, 122, 2, 30, "Input"]
}, Open  ]]
}, Open  ]]
}
]
*)

